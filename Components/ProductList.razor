@using Microsoft.AspNetCore.Components.Web
@using ASP.NET_App_004.Models
@using ASP.NET_App_004.Services
@inject JsonFileProductService ProductService

<div class="card-container">
    @foreach (var product in ProductService.GetProducts())
    {
        <div class="card">
            <img src="@product.Image" alt="@product.Title">
            <h2>@product.Title</h2>
            <p>@product.Description</p>
            <a href="@product.Url">Learn more</a>

        <div class="card-footer">
            <small class="text-muted">
                <button @onclick="(e) => SelectProduct(product.Id)"
                        data-toggle="modal"
                        data-target="#productModal"
                        class="btn btn-primary">More Info</button>
                </small>
            </div>
        </div>
    }
</div>

@code {
    Product? selectProduct;
    string selectProductId = string.Empty; 

    void SelectProduct(string productId)
    {
        selectProductId = productId;
        selectProduct = ProductService.GetProducts().FirstOrDefault(x => x.Id == productId);
    }
}
